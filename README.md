Ошибки: 
1. Некорректная обработка исключений (при ошибке email заказ не помечался как обработанный)
2. Отсутствие валидации зависимостей (конструктор принимал null-объекты)
3. Магические числа (жестко закодированное значение 100) 
4. Божесвенный объект 
Исправления:
1. "IsProcessed" устанавливается до отправки email
2. Добавлены проверки на null-объекты
3. Божественный метод разделен на "EnsureDatabaseConnection()", "ValidateOrder()"
4. Магичсеское число было вынесено в константку emailThreshhold
